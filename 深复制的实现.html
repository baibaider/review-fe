<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>实现深复制</title>
  </head>
  <body>
  <script src="jquery.min.js"></script>
    <script>
    // 1. assign方法
    // var obj1 = {"name":"baibai", "age":"18"};
    // var obj2 = Object.assign({},obj1);
    // console.log(obj1);
    // console.log(obj2);
    //
    // // 2. 手动复制
    // var obj1 = {"name":"baibai", "age":"18"};
    // var obj2 = {"name":obj1.name, "age":obj1.age};
    // console.log(obj1);
    // console.log(obj2);
    // // 3.JSON.stringify()和JSON.parse()
    // var obj1 = {"name":"baibai", "age":"18"};
    // var obj2  = JSON.parse(JSON.stringify(obj1));
    // console.log(obj2);
    //   // function deepClone(initalObj , finalObj){
    //   //   var obj = finalObj || {};
    //   //   for(var i in initalObj){
    //   //     if(typeof initalObj[i] === 'object'){
    //   //       obj[i] = (initalObj[i].constructor === Array) ? [] : {};
    //   //       arguments.callee(initalObj[i] , obj[i]);
    //   //     }else{
    //   //       obj[i] = initalObj[i];
    //   //     }
    //   //   }
    //   //   return obj;
    //   // }
    //   // var str = {};
    //   // var obj = { a: { a: "hello", b: 123}};
    //   // deepClone(obj, str);
    //   // console.log(str);
    //   // 上述代码确实可以实现深拷贝。但是当遇到两个互相引用的对象，会出现死循环的情况。
    //   // 为了避免相互引用的对象导致死循环的情况，则应该在遍历的时候判断是否相互引用对象，如果是则退出循环。
    //
    //   //改进版
    //     function deepClone(initalObj , finalObj){
    //       var obj = finalObj || {};
    //       for(var i in initalObj){
    //         var prop = initalObj[i];    // 避免相互引用对象导致死循环，如initalObj.a = initalObj的情况
    //         if(prop === obj){
    //           continue;
    //         }
    //         if(typeof prop === 'object'){
    //           obj[i] = (prop.constructor === Array) ? [] : {};
    //           arguments.callee(prop , obj[i]);
    //         }else{
    //           obj[i] = prop;
    //         }
    //       }
    //       return obj;
    //     }
    //     var str = {};
    //     var obj = { a: { a: "hello", b: 123}};
    //     deepClone(obj, str);
    //     console.log(str);
    //     //Object.create()
    //     var obj1 = {"name":"baibai", "age":"18"};
    //     var obj2 = Object.create(obj1)

         // jQuery的$.extend
         var obj1 = {"name":"baibai", "age":"18"};
         var obj2 = $.extend(true,{},obj1);
         obj2.name = "xiaobai";
         console.log(obj1);
         console.log(obj2);


         //lodash函数库
         var _ = require('lodash');
         var obj1 = {"name":"baibai", "age":"18"};
         var obj2 = _.cloneDeep(obj1);
    </script>
  </body>
</html>
